<table border="0" width="100%" id="table1">

	<tr>
		<td bgcolor="#000080" colspan="2">&nbsp;</td>
	</tr>
	<tr>
		<td rowspan="2">
		<IMG id=spsPageTitleIcon alt="" 
                  src="../../../../assets/img/spstopic.gif" align="center" width="49" height="49"></td>
		<td>
                  &nbsp;<font face="Verdana" style="font-size: 9pt">Formulario de pedido de un 
						nuevo tubo patrón</font></td>
	</tr>
	<tr>
		<td>
						<font color="#000080" face="Verdana" size="4">TAND</font></td>
	</tr>
</table>


<table border="1" cellpadding="0" class="tabladatos" width="100%" style="border-color: #C0C0C0; border-width: 1px">
    <tr>
      <td width="33%" bordercolor="#f5f5f5">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%" color=#f5f5f5 bordercolor="#f5f5f5">
            <tr bgcolor=#f5f5f5>
                <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5; " width="59">&nbsp;Código:</td>
                <td class="valor" bgcolor="#f5f5f5"  style="border-color: #f5f5f5; ">{{code}}</td>
      </tr></table></td>
    
      <td width="33%" cellspacing="0">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%">
            <tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5;color:#f5f5f5">aa</td>
      </tr>
      </table>
    </td>


    <td width="33%" cellspacing="0">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%">
            <tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Tipo de Tubo:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{tubetype}}</td>
      </tr>
      </table>
    </td>

    </tr>


    <tr>
      <td width="33%">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Cliente:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{client}}</td>
      </tr></table></td>

          
      <td width="33%" cellspacing="0">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%">
            <tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5;color:#f5f5f5">aa</td>
      </tr>
      </table>
    </td>

      <td width="33%" bordercolor="#f5f5f5">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%" color=#f5f5f5 bordercolor="#f5f5f5">
            <tr bgcolor=#f5f5f5>
                <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5; " width="59">&nbsp;Planta/Línea:</td>
                <td class="valor" bgcolor="#f5f5f5"  style="border-color: #f5f5f5; ">{{plantline}}</td>
      </tr></table></td>
    
      
    </tr>


    <tr>
      <td width="33%">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%" bgcolor="#f5f5f5" bordercolor="#f5f5f5"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Longitud:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{length}} mm&nbsp;</td>
      </tr></table></td>
      <td width="33%">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%" color=#f5f5f5><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Di&aacute;metro:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{diam}} mm&nbsp;</td>
      </tr></table></td>
      <td width="33%"><table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Espesor:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{thickness}} mm&nbsp;</td>
      </tr></table></td>
    </tr>
   
   
    <tr>
      <td width="33%">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%" bgcolor="#f5f5f5" bordercolor="#f5f5f5"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Ciclo:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{cycle}}&nbsp;</td>
      </tr></table></td>
      <td width="33%"><table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Colada:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{steelcasting}}&nbsp;</td>
      </tr></table></td>
      <td width="33%"><table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Expediente:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{record}}&nbsp;</td>
      </tr></table></td>
    </tr>





    <tr>
      <td width="33%">
        <table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%" bgcolor="#f5f5f5" bordercolor="#f5f5f5"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Grado:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{degree}}&nbsp;</td>
      </tr></table></td>
      <td width="33%"><table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Acero:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{steel}}&nbsp;</td>
      </tr></table></td>
      <td width="33%"><table border="0" cellspacing="0" cellpadding="0" class="borde" width="100%"><tr>
      <td class="tubo" bgcolor="#f5f5f5" style="border-color: #f5f5f5">&nbsp;Trat. Térmico:</td>
        <td class="valor" bgcolor="#f5f5f5" style="border-color: #f5f5f5">{{heat_treatment}}&nbsp;</td>
      </tr></table></td>
    </tr>










    </table>




    <BR>
        <div align="center">
        <table cellspacing="0" cellpadding="0" border="1" bordercolor="#666666" width="768" height="80">
        <tr>
        <td style="text-align: center;" width ="100%">
            {{code}}
         <!--
            <%
            Response.Write("<div style=""POSITION: relative; TOP: 0px; Left: 0px"">")
            Response.Write("<font style=""POSITION: absolute;TOP:-10px; LEFT: 0px;"" class=""tabladatos"">")
            Response.Write(Codigo&"&nbsp;")
            Response.Write("</font>")
            Response.Write("</div>")
            
            Dim Values()
            Dim i
            Dim fFueraDeRango
            ReDim Values(700)
            
            i = 0
            do until i = 699
             values(i) = 10
             i = i + 1
            loop
            
            fFueraDeRango=false
            Do until (rstQ.EOF)	
            if (rstQ("Valor") <= longitud) then
                fFueraDeRango=true
            end if
            
            if (rstQ("Valor") <= longitud) then
              if (values(CInt((rstQ("Valor")*700/longitud))) > 39) then
               values(CInt((rstQ("Valor")*700/longitud))) = -20
              else
               values(CInt((rstQ("Valor")*700/longitud))) = values(CInt((rstQ("Valor")*700/longitud))) + 20
              end if
            end if
           
           if (rstQ("Valor") <= longitud) then
              Response.Write("<div style=""POSITION: relative; TOP: 0px; Left: 0px"">")
              Response.Write("<img src=""imgPatterns/"&rstQ("Codigo")&".gif"" alt="""&rstQ("Defecto")&vbCrLf&"Posici�n: "&rstQ("Valor")&"mm"" style=""POSITION: absolute;TOP:"&values(CInt((rstQ("Valor")*700/longitud)))-30&"px; LEFT: "&CInt((rstQ("Valor")*700/longitud)-10+65)&"px;"">")
              Response.Write("</div>")
        
              Response.Write("<div style=""POSITION: relative; TOP: "&values(CInt((rstQ("Valor")*700/longitud)))-22&"px; Left: 65px"">")
              Response.Write("<font style=""POSITION: absolute;TOP:0px; LEFT: "&CInt((rstQ("Valor")*700/longitud)-6)&"px;"" class=""BaloresLetras"">")
              Response.Write(rstQ("Letra")&"&nbsp;")
              Response.Write("</font>")
              Response.Write("</div>")
           end if
              rstQ.MoveNext 
            loop
            rstQ.Close
          %>
          -->
        </td>
        </tr>
        </table>
        

        <BR>
        


        <div class="row" >


        <div class="col-sm-6" style="border: 1px;">
            <h5 class="card-header" style="background-color: #CECEF6;margin:0;padding:1.5px" >&nbsp;&nbsp;Defectos</h5>
            <div class="card-body"  style="background-color:#F5A9E1">
                <!--   sasdasddad -->
              


     
                <table class="atributos" border="0" cellspacing="1" cellpadding="2" width="100%" align="center"   >
   

                    <tr *ngFor="let ro of requiredorders" >
                        
                        <td   *ngIf="ro.Letra=='xxxx'" >&nbsp;&nbsp;&nbsp;No se ha agregado ningún defecto. Seleccione un tipo de defecto, complete sus atributos y haga clic en Crear defecto para comenzar a agregar defectos. Una vez que haya cargado todos los defectos que necesita, haga clic en Terminar</td>
                        
                        <td *ngIf="ro.Letra!='xxxx'" class="expander" align="center" valign="middle" width="30" onMouseDown="" onMouseOver="" onMouseOut="">
                        <img  (click)="opendetails(1,ro.codigo,ro.Letra)" *ngIf="ro.Letra!='xxxx'" src='../../../../assets/imgPatterns/{{ro.codigo}}.gif' >
                        </td>

                        <td *ngIf="ro.Letra!='xxxx'" class="titulo">{{ro.Letra}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ro.Descripcion}}</td>                       
                        
                        <td *ngIf="ro.Letra!='xxxx'" align="right" class="eliminar">
                        <A class="eliminacion" (click)="eliminarDefecto(ro.codigo,ro.Letra,ro.Descripcion,ro.id)"> Eliminar </A>&nbsp;&nbsp;
                        <A class="eliminacion"   (click)="modificarDefecto(ro.codigo,ro.Letra,ro.Descripcion)"> Modificar </A>	  
                        </td>
                    </tr>

                    

                </table>
                    
                    
                    
            

           
          </div>
        </div>


<!--  **********************************************************  -->
          
        <div  class="col-sm-6" style="border: 1px;">
            <h5 class="card-header" style="background-color: #CECEF6;margin:0;padding:0" >&nbsp;&nbsp;Tipo de defecto: &nbsp;              
                <select class="form-group form-control" id="selDefectologia" name="selDefectologia" style="width: 50%;margin:0;padding:0" size="1" (change)="ActualizaAtributos(selectedValue_td)"  [(ngModel)]='selectedValue_td'>
                    <OPTION [value]="item.idTipoDefecto"   *ngFor="let item of typesdefects">{{item.descripcion}}</OPTION>
                </select>        
            </h5>
            <div class="card-body"  style="background-color:#F5A9E1">
                <!--   sasdasddad -->
              
   
           
           
                <table class="atributos" border="0" cellspacing="1" cellpadding="2" width="100%" align="center"   >
                    <tr>
                      <th class="header">Atributo</th>
                      <th class="header">Valor</th>
                      <th class="header">Tolerancia</th>
                    </tr>

                    <tr *ngFor="let t of table" >
                        
                        <td class="descripcion" >{{t.descripcion}} [{{t.unidad}}]</td>
                        
                        <td>
                            <input *ngIf="t.IdAtributo==6" type="number" [(ngModel)]='t.value'   class="input" value="{{t.value}}"   >
                            <input   *ngIf="t.IdAtributo!=6 && t.IdAtributo!=4" type="number" [(ngModel)]='t.value' class="input" value="{{t.value}}"  >
                            <input   *ngIf="t.IdAtributo==4" type="number" class="input" [(ngModel)]='t.value' value="{{t.value}}"   >

                        </td>
                        
                        <td *ngIf="t.IdAtributo==6" class="descripcion" >
                        <input style="width: 50px;"   class="input"  [(ngModel)]='t.th' value="{{t.th}}" type="number" size="3" onBlur="VerificaNumero(this);">&nbsp;+%&nbsp;
                        <input style="width: 50px;"   class="input"  [(ngModel)]='t.tl' value="{{t.tl}}"  type="number" size="3" onBlur="VerificaNumero(this);" >&nbsp;-%                       
                        </td>
                    </tr>



                </table>


                <input *ngIf = "iscreate" class="button" type="Button" Value="Crear defecto" (click)="ProcesarDefecto(0)">





                <input *ngIf = "ismodify" class="button" type="Button" Value="Modificar defecto" (click)="ProcesarDefecto(1,selectedValue_td)" >


          </div>
        </div>
    </div>


    <div style="text-align: center;margin-top: 20px;">

      <input class="btn btn-primary mr-3" style="padding:10px;" type="button" Value="Modificar Datos" (click)="back()">
      
      
      <input class="btn btn-primary mr-3" style="padding:10px;"  type="button" Value="Confirmar" (click)="confirm()"   >
      

      <input class="btn btn-primary mr-3" style="padding:10px;"  type="button" Value="Eliminar Pedido" (click)="delete()"   >

      </div>


